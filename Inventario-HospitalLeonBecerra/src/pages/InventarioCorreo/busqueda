//Ejemplo de get :"v


import React, { useState, useEffect } from 'react';
import { IonPage, IonContent, IonLabel } from '@ionic/react';
import ListaCorreos from '../../components/correoComponents/ListaCorreos';
import AxiosCorreo from '../../requerimientos/AxiosCorreo';

const Home: React.FC = (props: any) => {
  const [correos, setCorreos] = useState([] as any);

  //ejecturar sólo una vez, enviar como argumento el arreglo vacío
  useEffect(() => {
    let fecha = '2019-12-27';
    AxiosCorreo.correo_por_fecha(fecha).then(res => {
      setCorreos(res.data);
    });
  }, []);

  if (correos.length === 0) {
    console.log("No hay nada");
    return null;
  } else {
    return (
      <IonPage>
        <IonContent>
          {correos.map((dato: any)=>{
              return (
                <ListaCorreos nombres={dato.nombre} apellidos={dato.apellido} departamento={dato.departamento} correo={dato.correo} />
              )
            })
          }
        </IonContent>
      </IonPage>
    );
  }
};

export default Home;

